# Contributor: Chloe Kudryavtsev <toast@toastin.space>
# Maintainer: Chloe Kudryavtsev <toast@toastin.space>
pkgname=hugo
pkgver=0.54.0
pkgrel=0
pkgdesc="A Fast and Flexible Static Site Generator built with love in GoLang"
url="http://gohugo.io/"
arch="all"
license="Apache-2.0"
depends=""
makedepends="go"
install=""
source="${pkgname}-${pkgver}.tar.gz::https://github.com/gohugoio/$pkgname/archive/v$pkgver.tar.gz"
builddir="$srcdir/${pkgname}-${pkgver}"
options="!check" # multiple tests currently fail on all platforms I've tested them on
# go does not have appropriate test-disabling functionality built-in

build() {
	cd "$builddir"
	export GOPATH="$srcdir/gopath"
	go build -tags extended -v -o bin/$pkgname
	go clean -modcache
}

check() {
	cd "$builddir"
	export GOPATH="$srcdir/gopath"
	go test -v ./...
	go clean -modcache
}

package() {
	install -Dm755 "$builddir"/bin/$pkgname "$pkgdir"/usr/bin/$pkgname
}

sha512sums="904b9ae9e3db91195e9e768faca8867d6534d20f64b19dec4d1788ca5f19863e9fac284821855ffef9bee6280d77cc72816c42b6e28b5f3a4f45d12daf6b9d0d  hugo-0.54.0.tar.gz"
