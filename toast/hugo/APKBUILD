# Contributor: Thomas Boerger <thomas@webhippie.de>
# Maintainer: Thomas Boerger <thomas@webhippie.de>
pkgname=hugo
pkgver=0.51
pkgrel=0
pkgdesc="A Fast and Flexible Static Site Generator built with love in GoLang"
url="http://gohugo.io/"
arch="all"
license="Apache-2.0"
depends=""
makedepends="go"
install=""
source="${pkgname}-${pkgver}.tar.gz::https://github.com/gohugoio/$pkgname/archive/v$pkgver.tar.gz"
builddir="$srcdir/${pkgname}-${pkgver}"
options="!check" # multiple tests currently fail on all platforms I've tested them on
# go does not have appropriate test-disabling functionality built-in

build() {
	cd "$builddir"
	export GOPATH="$srcdir/gopath"
	go build -tags extended -v -o bin/$pkgname
	go clean -modcache
}

check() {
	cd "$builddir"
	export GOPATH="$srcdir/gopath"
	go test -v ./...
	go clean -modcache
}

package() {
	install -Dm755 "$builddir"/bin/$pkgname "$pkgdir"/usr/bin/$pkgname
}

sha512sums="47c04c0388856c02aaf1be58676c0f625b30552c3ccc11c77a014d70bfb18ba6856268a1f3714ec75c8462753e333a597285064ab56f80c946669c35c5d2ee0c  hugo-0.51.tar.gz"
