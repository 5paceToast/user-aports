# Contributor: Chloe Kudryavtsev <toast@toastin.space>
# Maintainer: Chloe Kudryavtsev <toast@toastin.space>
pkgname=hugo
pkgver=0.52
pkgrel=0
pkgdesc="A Fast and Flexible Static Site Generator built with love in GoLang"
url="http://gohugo.io/"
arch="all"
license="Apache-2.0"
depends=""
makedepends="go"
install=""
source="${pkgname}-${pkgver}.tar.gz::https://github.com/gohugoio/$pkgname/archive/v$pkgver.tar.gz"
builddir="$srcdir/${pkgname}-${pkgver}"
options="!check" # multiple tests currently fail on all platforms I've tested them on
# go does not have appropriate test-disabling functionality built-in

build() {
	cd "$builddir"
	export GOPATH="$srcdir/gopath"
	go build -tags extended -v -o bin/$pkgname
	go clean -modcache
}

check() {
	cd "$builddir"
	export GOPATH="$srcdir/gopath"
	go test -v ./...
	go clean -modcache
}

package() {
	install -Dm755 "$builddir"/bin/$pkgname "$pkgdir"/usr/bin/$pkgname
}

sha512sums="45baf7d3b98b7ed5aee7a8d154a87d32f89a56cd00cff48f21d5c69bef7f13ebd9726885885ce74f9c65587669090ce613ae5bb3652a9e1dd3a47a69faa44272  hugo-0.52.tar.gz"
