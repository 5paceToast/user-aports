# Contributor: Chloe Kudryavtsev <toast@toastin.space>
# Maintainer: Chloe Kudryavtsev <toast@toastin.space>
pkgname=sd
pkgver=0.5.0
pkgrel=0
pkgdesc="Intuitive find & replace CLI"
url="https://github.com/chmln/sd"
arch="all"
license="MIT"
depends=""
makedepends="cargo"
install=""
subpackages=""
source="https://github.com/chmln/$pkgname/archive/$pkgname-$pkgver.tar.gz"
builddir="$srcdir/$pkgname-$pkgname-$pkgver"

build() {
	cd "$builddir"
	export CARGO_HOME="$srcdir"/cargo
	export RUSTFLAGS="-C target-feature=-crt-static"
	cargo build \
		--release \
		--verbose
}

check() {
	cd "$builddir"
	export CARGO_HOME="$srcdir"/cargo
	export RUSTFLAGS="-C target-feature=-crt-static"
	cargo test --all \
		--release \
		--verbose
}

package() {
	cd "$builddir"
	install -Dm755 target/release/sd "$pkgdir"/usr/bin/"$pkgname"
}

sha512sums="b2db9c4677300866666af0f291624b57a1c59da45f79c518e4302b3dbb185cdf9ef3e89926264b112cc163cbd3664fb027898e9789f6065c7cd2a2f5a662de24  sd-0.5.0.tar.gz"
